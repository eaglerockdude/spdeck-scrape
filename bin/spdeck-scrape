#!/usr/bin/env ruby

require 'spdeck-scrape'
require 'pry'

# usage: $ spdeck-scrape my_query my_range [verbose | concise] -html[optional for html gen]
if ARGV.empty?
    puts "\n\n------- spdeck-scrape: ERROR! --------"
    puts "      Please specify a query, range, and display option:"
    puts "      'spdeck-scrape my_query an_integer [-v for verbose | -c for concise]'"
    puts "      ex:"
    puts "      'spdeck-scrape ruby 15 -v'\n\n"
else
    query = ARGV[0]
    range = ARGV[1].to_i || 5
    display = ARGV[2] || '-c'

    user = SpeakerdeckScraper.new(query, range, display)

    user.query_results_scrape(range)
    user.scrape_all
    if ARGV.include?("-html")
        user.html_gen
        system("open spd-#{query}.html")
        puts
    end

end


